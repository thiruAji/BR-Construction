import{r as e,a as t,R as r}from"./vendor-CzsvKnaC.js";import{i as s,g as n,a,b as i,e as o,o as l,d,c,s as m,f as u,h as p,R as h,j as x,k as g,q as y,l as j,m as b,n as f,p as v,r as w,t as C,u as S,v as N,w as k,x as E,y as I}from"./firebase-D-rK4RHE.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var _={exports:{}},O={},B=e,R=Symbol.for("react.element"),L=Symbol.for("react.fragment"),A=Object.prototype.hasOwnProperty,D=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,r){var s,n={},a=null,i=null;for(s in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(i=t.ref),t)A.call(t,s)&&!F.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:R,type:e,key:a,ref:i,props:n,_owner:D.current}}O.Fragment=L,O.jsx=M,O.jsxs=M,_.exports=O;var T=_.exports,P={},U=t;P.createRoot=U.createRoot,P.hydrateRoot=U.hydrateRoot;const V={apiKey:"AIzaSyAmWH_Vwhrok_r_lUsjgT2V_P_d63Dly98",authDomain:"construction-da7de.firebaseapp.com",projectId:"construction-da7de",storageBucket:"construction-da7de.firebasestorage.app",messagingSenderId:"557692258606",appId:"1:557692258606:web:283a05beed9e7079fad2bf"},z=s(V),W=n(z),$=a(z),H=i(z);"undefined"!=typeof window&&o($).catch(e=>{"failed-precondition"===e.code||e.code});const q=e.createContext(),G=()=>{const t=e.useContext(q);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Y=({children:t})=>{const[s,n]=e.useState(null),[a,i]=e.useState(!0),o=r.useRef({});e.useEffect(()=>{if(!W)return void i(!1);return l(W,async e=>{if(e){if(o.current[e.uid])return n(o.current[e.uid]),void i(!1);const a=localStorage.getItem(`user_cache_${e.uid}`);if(a)try{const e=JSON.parse(a);n(e),i(!1)}catch(t){}try{const t=d($,"users",e.uid),s=new Promise((e,t)=>setTimeout(()=>t(new Error("Firestore timeout")),8e3)),a=await Promise.race([c(t),s]);let i="Member";if(a.exists())i=a.data().role;else try{await m(d($,"users",e.uid),{email:e.email||"",phoneNumber:e.phoneNumber||"",role:"Member",createdAt:(new Date).toISOString()})}catch(r){}const l={uid:e.uid,email:e.email,phoneNumber:e.phoneNumber,role:i,name:e.displayName||(e.email?e.email.split("@")[0]:e.phoneNumber||"User")};o.current[e.uid]=l,localStorage.setItem(`user_cache_${e.uid}`,JSON.stringify(l)),n(l)}catch(s){const t={uid:e.uid,email:e.email,role:localStorage.getItem("temp_role")||"Member",name:e.displayName||(e.email?e.email.split("@")[0]:"User")};n(t)}}else n(null);i(!1)})},[]);const y={user:s,signupEmail:async(e,t,r)=>{if(!W)throw new Error("Firebase not configured");const s=await g(W,e,t),n=r&&"CEO123"===r?"CEO":"Member";return await m(d($,"users",s.user.uid),{email:e,role:n,createdAt:(new Date).toISOString()}),s.user},loginEmail:(e,t)=>{if(!W)throw new Error("Firebase not configured");return x(W,e,t)},setupRecaptcha:e=>{if(!W)throw new Error("Firebase not configured");if(!window.recaptchaVerifier)try{window.recaptchaVerifier=new h(W,e,{size:"invisible",callback:e=>{}})}catch(t){}},sendPhoneOtp:async e=>{if(!W)throw new Error("Firebase not configured");const t=window.recaptchaVerifier;return p(W,e,t)},logout:()=>{if(W)return u(W)},isCEO:()=>"CEO"===s?.role,upgradeToCEO:async e=>{if(!W.currentUser)return!1;if("CEO123"!==e.trim())return!1;try{const e=new Promise((e,t)=>setTimeout(()=>t(new Error("Firestore update timed out")),1e4));return await Promise.race([m(d($,"users",W.currentUser.uid),{role:"CEO",updatedAt:(new Date).toISOString()},{merge:!0}),e]),n(e=>{const t={...e,role:"CEO"};return o.current[W.currentUser.uid]=t,t}),localStorage.removeItem("temp_role"),!0}catch(t){return n(e=>{const t={...e,role:"CEO"};return o.current[W.currentUser.uid]=t,t}),localStorage.setItem("temp_role","CEO"),t.message.includes("timed out")?alert("âš ï¸ Backend Connection Failed!\n\nI have upgraded you to CEO LOCALLY so you can continue working.\n\nTo fix the backend permanently:\n1. Go to Firebase Console > Firestore Database\n2. Click 'Create Database'"):alert("âš ï¸ Update failed: "+t.message+"\n\nSwitched to Offline CEO Mode."),!0}},loading:a};return T.jsx(q.Provider,{value:y,children:t})},K=r.memo(()=>{const[t,r]=e.useState("email"),[s,n]=e.useState(!1),[a,i]=e.useState(""),[o,l]=e.useState(""),[d,c]=e.useState(!1),[m,u]=e.useState(""),[p,h]=e.useState(""),[x,g]=e.useState(""),[y,j]=e.useState("input"),[b,f]=e.useState(null),[v,w]=e.useState(""),[C,S]=e.useState(!1),[N,k]=e.useState(!V.apiKey),{loginEmail:E,signupEmail:I,setupRecaptcha:_,sendPhoneOtp:O}=G();e.useEffect(()=>{if("phone"===t&&"input"===y)try{_("recaptcha-container")}catch(e){}},[t,y]);const B=()=>T.jsx("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 0.8s linear infinite",marginRight:"8px"}});return T.jsxs("div",{className:"flex-center",style:{minHeight:"100vh",padding:"1rem"},children:[T.jsx("style",{children:"\n                @keyframes spin {\n                    0% { transform: rotate(0deg); }\n                    100% { transform: rotate(360deg); }\n                }\n            "}),N&&T.jsxs("div",{className:"card fade-in",style:{maxWidth:"500px",width:"100%",background:"rgba(231, 76, 60, 0.15)",border:"2px solid #e74c3c",marginBottom:"2rem"},children:[T.jsx("h2",{style:{color:"#e74c3c",marginBottom:"1rem"},children:"âš ï¸ Firebase Configuration Error"}),T.jsx("p",{style:{marginBottom:"1rem"},children:"The app is not properly configured with Firebase credentials. Please follow these steps:"}),T.jsxs("ol",{style:{marginBottom:"1rem",paddingLeft:"1.5rem"},children:[T.jsxs("li",{style:{marginBottom:"0.5rem"},children:["Create a ",T.jsx("strong",{children:".env"})," file in the root directory"]}),T.jsxs("li",{style:{marginBottom:"0.5rem"},children:["Add your Firebase credentials from ",T.jsx("a",{href:"https://console.firebase.google.com",target:"_blank",rel:"noopener noreferrer",style:{color:"#3498db",textDecoration:"underline"},children:"Firebase Console"})]}),T.jsx("li",{style:{marginBottom:"0.5rem"},children:"Copy this template:"})]}),T.jsx("div",{style:{background:"rgba(0,0,0,0.3)",padding:"1rem",borderRadius:"6px",marginBottom:"1rem",fontFamily:"monospace",fontSize:"0.85rem",overflowX:"auto"},children:T.jsx("pre",{style:{margin:0},children:"VITE_FIREBASE_API_KEY=your_api_key\nVITE_FIREBASE_AUTH_DOMAIN=your_auth_domain\nVITE_FIREBASE_PROJECT_ID=your_project_id\nVITE_FIREBASE_STORAGE_BUCKET=your_storage_bucket\nVITE_FIREBASE_MESSAGING_SENDER_ID=your_sender_id\nVITE_FIREBASE_APP_ID=your_app_id\nVITE_ADMIN_SIGNUP_CODE=CEO123"})}),T.jsx("p",{style:{marginBottom:"1rem",fontSize:"0.9rem"},children:"After updating .env, restart the development server:"}),T.jsx("div",{style:{background:"rgba(0,0,0,0.3)",padding:"0.8rem",borderRadius:"6px",marginBottom:"1rem",fontFamily:"monospace",fontSize:"0.85rem"},children:"npm run dev"}),T.jsx("button",{onClick:()=>k(!1),style:{background:"none",border:"1px solid #e74c3c",color:"#e74c3c",padding:"0.6rem 1.2rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.95rem"},children:"I'll Configure It & Refresh"})]}),T.jsxs("div",{className:"card fade-in",style:{maxWidth:"450px",width:"100%",opacity:C?.7:1,pointerEvents:C?"none":"auto"},children:[T.jsxs("div",{className:"text-center mb-lg",children:[T.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ðŸ—ï¸"}),T.jsx("h1",{style:{marginBottom:"0.5rem"},children:"BR CONSTRUCTION"}),T.jsx("p",{className:"text-muted",children:s?"Create an account":"Sign in to manage sites"})]}),T.jsxs("div",{className:"flex mb-md",style:{background:"rgba(255,255,255,0.05)",borderRadius:"var(--radius-md)",padding:"4px"},children:[T.jsx("button",{type:"button",className:"btn "+("email"===t?"btn-primary":""),style:{flex:1,background:"email"===t?"":"transparent",boxShadow:"none"},onClick:()=>{r("email"),w("")},children:"ðŸ“§ Email"}),T.jsx("button",{type:"button",className:"btn "+("phone"===t?"btn-primary":""),style:{flex:1,background:"phone"===t?"":"transparent",boxShadow:"none"},onClick:()=>{r("phone"),w("")},children:"ðŸ“± Phone"})]}),"email"===t&&T.jsxs("form",{onSubmit:async e=>{e.preventDefault(),w(""),S(!0);try{s?await I(a,o,x):await E(a,o)}catch(t){w(t.message.replace("Firebase: ",""))}S(!1)},children:[T.jsxs("div",{className:"input-group",children:[T.jsx("label",{children:"Email Address"}),T.jsx("input",{type:"email",placeholder:"name@company.com",value:a,onChange:e=>i(e.target.value),required:!0})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{children:"Password"}),T.jsxs("div",{style:{position:"relative"},children:[T.jsx("input",{type:d?"text":"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:o,onChange:e=>l(e.target.value),required:!0,style:{paddingRight:"40px"}}),T.jsx("button",{type:"button",onClick:()=>c(!d),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",color:"var(--text-muted)"},title:d?"Hide password":"Show password",children:d?"ðŸ™ˆ":"ðŸ‘ï¸"})]})]}),s&&T.jsxs("div",{className:"input-group",children:[T.jsx("label",{children:"Secret Code (Optional)"}),T.jsx("input",{type:"text",placeholder:"For CEO access only",value:x,onChange:e=>g(e.target.value)}),T.jsx("small",{className:"text-muted",children:"Enter admin code for CEO access"})]}),v&&T.jsx("div",{className:"text-danger mb-md",children:v}),T.jsxs("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:C,children:[C&&T.jsx(B,{}),C?"Logging in...":s?"Create Account":"ðŸ”‘ Login"]})]}),"phone"===t&&"input"===y&&T.jsxs("form",{onSubmit:async e=>{e.preventDefault(),w(""),S(!0);try{const e=await O(m);f(e),j("verify")}catch(t){let e=t.message.replace("Firebase: ","");(e.includes("billing")||e.includes("quota"))&&(e="âš ï¸ SMS limit reached or billing not enabled. Please use a TEST PHONE NUMBER (e.g., +91 9999999999) defined in Firebase Console."),w(e)}S(!1)},children:[T.jsxs("div",{className:"input-group",children:[T.jsx("label",{children:"Phone Number"}),T.jsx("input",{type:"tel",placeholder:"+91-9*********",value:m,onChange:e=>u(e.target.value),required:!0})]}),T.jsx("div",{id:"recaptcha-container"}),v&&T.jsx("div",{className:"text-danger mb-md",children:v}),T.jsxs("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:C,children:[C&&T.jsx(B,{}),C?"Sending Code...":"ðŸ“± Send Verification Code"]})]}),"phone"===t&&"verify"===y&&T.jsxs("form",{onSubmit:async e=>{e.preventDefault(),w(""),S(!0);try{await b.confirm(p)}catch(t){w(t.message.replace("Firebase: ",""))}S(!1)},children:[T.jsxs("div",{className:"input-group",children:[T.jsx("label",{children:"Verification Code"}),T.jsx("input",{type:"text",placeholder:"123456",value:p,onChange:e=>h(e.target.value),required:!0,style:{textAlign:"center",letterSpacing:"4px"}})]}),v&&T.jsx("div",{className:"text-danger mb-md",children:v}),T.jsxs("button",{type:"submit",className:"btn btn-success",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:C,children:[C&&T.jsx(B,{}),C?"Verifying...":"âœ… Verify & Login"]}),T.jsx("button",{type:"button",className:"btn text-muted",style:{width:"100%",background:"none",marginTop:"0.5rem"},onClick:()=>j("input"),children:"Back"})]}),"email"===t&&T.jsx("div",{className:"text-center mt-md",children:T.jsx("button",{className:"text-primary",style:{background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},onClick:()=>n(!s),children:s?"Already have an account? Login":"Need an account? Sign Up"})}),T.jsx("div",{className:"text-center mt-lg pt-md",style:{borderTop:"1px solid var(--glass-border)"},children:T.jsx("button",{onClick:()=>{confirm("Disconnect from current cloud database?")&&(localStorage.removeItem("firebaseConfig"),window.location.reload())},className:"text-muted",style:{background:"none",border:"none",cursor:"pointer",fontSize:"0.8rem"},children:"âš™ï¸ Reset Connection"})})]}),C&&T.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,flexDirection:"column",color:"white",backdropFilter:"blur(4px)"},children:[T.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem",animation:"pulse 1.5s infinite"},children:"ðŸ—ï¸"}),T.jsx("div",{style:{width:"50px",height:"50px",border:"4px solid rgba(255,255,255,0.2)",borderTop:"4px solid white",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1.5rem"}}),T.jsx("h2",{style:{marginBottom:"0.5rem"},children:"Logging in..."}),T.jsx("p",{style:{opacity:.8},children:"Please wait while we verify your credentials."})]})]})}),X=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M2 6h20v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6Z"}),T.jsx("path",{d:"M17 16v5"}),T.jsx("path",{d:"M7 16v5"}),T.jsx("path",{d:"M12 16v5"}),T.jsx("path",{d:"M17 3v3"}),T.jsx("path",{d:"M7 3v3"}),T.jsx("path",{d:"M12 3v3"}),T.jsx("path",{d:"m10 16 4-10"}),T.jsx("path",{d:"m14 16-4-10"})]}),J=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",ry:"2"}),T.jsx("path",{d:"M9 22v-4h6v4"}),T.jsx("path",{d:"M8 6h.01"}),T.jsx("path",{d:"M16 6h.01"}),T.jsx("path",{d:"M8 10h.01"}),T.jsx("path",{d:"M16 10h.01"}),T.jsx("path",{d:"M8 14h.01"}),T.jsx("path",{d:"M16 14h.01"}),T.jsx("path",{d:"M12 6h.01"}),T.jsx("path",{d:"M12 10h.01"}),T.jsx("path",{d:"M12 14h.01"})]}),Z=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),T.jsx("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}),T.jsx("path",{d:"M7 3v4a1 1 0 0 0 1 1h7"})]}),Q=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M3 6h18"}),T.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),T.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),T.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),T.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),ee=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M5 12h14"}),T.jsx("path",{d:"M12 5v14"})]}),te=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),T.jsx("polyline",{points:"7 10 12 15 17 10"}),T.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),re=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("circle",{cx:"11",cy:"11",r:"8"}),T.jsx("path",{d:"m21 21-4.3-4.3"})]}),se=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),T.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),ne=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),T.jsx("polyline",{points:"16 17 21 12 16 7"}),T.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),ae=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),T.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),ie=()=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:T.jsx("path",{d:"m15 18-6-6 6-6"})}),oe=r.memo(({onSelectSite:t})=>{const{user:r,logout:s,isCEO:n,upgradeToCEO:a}=G(),[i,o]=e.useState([]),[l,d]=e.useState(!1),[c,m]=e.useState(""),[u,p]=e.useState(""),[h,x]=e.useState(!0),[g,C]=e.useState(null),[S,N]=e.useState(!1),[k,E]=e.useState(!1);e.useEffect(()=>{N(n())},[r?.role,n]),e.useEffect(()=>{const e=y(f($,"sites"),b("createdAt","desc"),j(50)),t=v(e,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));o(t),x(!1),C(null)},e=>{C("Failed to load sites. Check your internet connection or Firebase permissions."),x(!1)});return()=>t()},[]);return T.jsxs("div",{className:"container fade-in",style:{minHeight:"100vh",paddingTop:"2rem"},children:[T.jsxs("div",{className:"flex-between mb-lg",style:{flexWrap:"wrap",gap:"1.5rem",alignItems:"flex-start"},children:[T.jsxs("div",{style:{display:"flex",gap:"1.25rem",alignItems:"center"},children:[T.jsx("div",{style:{background:"linear-gradient(135deg, var(--primary-color), var(--primary-dark))",color:"white",padding:"12px",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-premium)",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx(X,{})}),T.jsxs("div",{children:[T.jsx("h1",{style:{margin:0,fontSize:"1.75rem"},children:"Construction Sites"}),T.jsxs("p",{className:"text-muted",style:{fontWeight:500},children:["Welcome back, ",T.jsx("strong",{className:"text-primary",children:r.name})," â€¢ ",T.jsx("span",{className:"badge badge-primary",children:r.role})]})]})]}),!S&&T.jsx("div",{className:"mt-md",children:T.jsx("button",{onClick:async()=>{const e=prompt("Enter CEO Secret Code:\n(Check your .env file - default: CEO123)");if(null!==e){if(!e.trim())return void alert("âŒ Please enter a code");E(!0);try{await a(e)?alert("ðŸŽ‰ Success! You are now a CEO.\n\nYou can now:\nâœ… Add Sites\nâœ… Edit Budgets\nâœ… Manage Expenses"):alert("âŒ Invalid Code entered.\n\nPlease check your .env file.\n(Default hint: CEO123)")}catch(t){alert("âš ï¸ An error occurred. Check console.")}E(!1)}},disabled:k,className:"btn btn-primary",children:k?"â³ Verifying...":T.jsxs(T.Fragment,{children:[T.jsx(ee,{})," Upgrade to CEO"]})})}),T.jsxs("button",{onClick:s,className:"btn btn-danger",style:{padding:"10px 20px",boxShadow:"0 4px 12px rgba(255, 59, 48, 0.2)"},children:[T.jsx(ne,{})," Logout"]})]}),S&&T.jsx("div",{className:"mb-lg",children:l?T.jsxs("div",{className:"card",style:{maxWidth:"500px"},children:[T.jsx("h3",{className:"mb-md",children:"Add New Site"}),T.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c.trim())if(S)try{const e={name:c.trim(),location:u.trim()||"Not specified",createdAt:(new Date).toISOString(),createdBy:r.uid,createdByEmail:r.email,expenseColumns:[{id:"item",name:"Item Description",type:"text",width:"200px"},{id:"amount",name:"Amount (â‚¹)",type:"number",width:"120px"}],ceoBudget:"",ceoProjectValue:""};await w(f($,"sites"),e);m(""),p(""),d(!1),alert("âœ… Site added successfully!")}catch(t){alert("âŒ Failed to add site:\n"+t.message+"\n\nCheck console for details.")}else alert("âŒ Only CEO users can add sites");else alert("âŒ Please enter a site name")},children:[T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"siteName",children:"Site Name *"}),T.jsx("input",{id:"siteName",type:"text",placeholder:"e.g., Downtown Plaza",value:c,onChange:e=>m(e.target.value),required:!0})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"siteLocation",children:"Location"}),T.jsx("input",{id:"siteLocation",type:"text",placeholder:"e.g., City Center",value:u,onChange:e=>p(e.target.value)})]}),T.jsxs("div",{className:"flex gap-sm",children:[T.jsx("button",{type:"submit",className:"btn btn-success",children:"Add Site"}),T.jsx("button",{type:"button",onClick:()=>d(!1),className:"btn btn-secondary",children:"Cancel"})]})]})]}):T.jsxs("button",{onClick:()=>d(!0),className:"btn btn-primary",children:[T.jsx(ee,{})," Add New Site"]})}),g&&T.jsxs("div",{className:"card mb-lg",style:{borderColor:"var(--danger-color)",background:"rgba(231, 76, 60, 0.1)"},children:[T.jsx("h3",{className:"text-danger",children:"Connection Error"}),T.jsx("p",{children:g}),T.jsx("small",{className:"text-muted",children:"Make sure you created the Firestore Database in your Firebase Console."})]}),h?T.jsxs("div",{className:"flex-center",style:{minHeight:"50vh",flexDirection:"column",gap:"1rem"},children:[T.jsx("div",{className:"loading-spinner-small",style:{width:"40px",height:"40px"}}),T.jsx("h3",{className:"text-muted",children:"Loading sites..."})]}):T.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"var(--spacing-lg)"},children:i.map((e,r)=>T.jsxs("div",{className:"card slide-in",onClick:()=>t(e),style:{cursor:"pointer",animationDelay:.1*r+"s",position:"relative",overflow:"hidden"},children:[T.jsx("div",{style:{position:"absolute",top:0,right:0,width:"100px",height:"100px",background:"linear-gradient(135deg, var(--primary-color), transparent)",opacity:.1,borderRadius:"0 0 0 100%"}}),T.jsxs("div",{style:{position:"relative",zIndex:1},children:[T.jsx("div",{style:{color:"var(--primary-color)",marginBottom:"1rem",background:"rgba(255, 107, 53, 0.08)",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"var(--radius-sm)"},children:T.jsx(J,{})}),T.jsx("h3",{className:"text-primary",style:{marginBottom:"0.5rem"},children:e.name}),T.jsxs("p",{className:"text-muted",style:{fontSize:"0.875rem",marginBottom:"1rem"},children:["ðŸ“ ",e.location]}),T.jsx("div",{style:{padding:"0.5rem",background:"rgba(255, 107, 53, 0.1)",borderRadius:"var(--radius-sm)",fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Click to manage costs"})]})]},e.id))}),!h&&0===i.length&&T.jsxs("div",{className:"text-center",style:{padding:"4rem 1rem"},children:[T.jsx("div",{style:{color:"var(--text-muted)",marginBottom:"1.5rem",opacity:.2},children:T.jsx(J,{})}),T.jsx("h3",{className:"text-muted",children:"No sites yet"}),T.jsx("p",{className:"text-muted",children:S?'Click "Add New Site" to get started':"Contact your CEO to add sites"})]})]})}),le=r.memo(({rowId:t,colId:s,value:n,type:a,onUpdate:i,isReadOnly:o})=>{const[l,d]=e.useState(n),c=r.useRef(null);e.useEffect(()=>{d(n)},[n]);return T.jsx("input",{type:"number"===a?"number":"text",value:l||"",onChange:e=>{if(o)return;const r=e.target.value;d(r),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{i(t,s,r)},800)},onBlur:()=>{o||c.current&&(clearTimeout(c.current),i(t,s,l))},disabled:o,style:{width:"100%",background:"transparent",border:"none",padding:"4px 0",cursor:o?"not-allowed":"text",opacity:o?.7:1,fontSize:"0.9375rem"}})}),de=r.memo(({row:e,columns:t,onUpdate:r,onDelete:s,onUpload:n,isUploading:a,isCEOUser:i})=>{const o=!i&&"CEO"===e.createdByRole;return T.jsxs("tr",{style:{background:o?"rgba(0,0,0,0.02)":"transparent"},children:[t.map(t=>{const s=o||!i&&"CEO"===t.createdByRole;return T.jsx("td",{children:T.jsx(le,{rowId:e.id,colId:t.id,value:e[t.id],type:t.type,onUpdate:r,isReadOnly:s})},`${e.id}-${t.id}`)}),T.jsx("td",{children:e.receiptUrl?T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("a",{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"block"},children:(e=>{if(!e)return!1;const t=e.toLowerCase();return t.includes(".jpg")||t.includes(".jpeg")||t.includes(".png")||t.includes(".gif")||t.includes(".webp")||t.includes("alt=media")})(e.receiptUrl)?T.jsx("img",{src:e.receiptUrl,alt:"Receipt",style:{width:"32px",height:"32px",objectFit:"cover",borderRadius:"4px",border:"1px solid var(--glass-border)",cursor:"zoom-in"},onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/32?text=ðŸ“„"}}):T.jsx("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-secondary)",borderRadius:"4px",fontSize:"1.2rem"},children:"ðŸ“„"})}),T.jsx("a",{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary",style:{fontSize:"0.75rem",fontWeight:"bold"},children:"View"})]}):T.jsxs("label",{style:{cursor:o?"not-allowed":"pointer",fontSize:"0.8rem",color:o?"var(--text-muted)":"var(--text-secondary)",opacity:o?.5:1,display:"flex",alignItems:"center",gap:"4px"},children:[a?T.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:T.jsx("span",{className:"loading-spinner-small"})}):T.jsxs(T.Fragment,{children:[T.jsx(se,{})," ",T.jsx("span",{style:{marginLeft:"4px"},children:"Upload"})]}),!o&&T.jsx("input",{type:"file",style:{display:"none"},accept:"image/*,application/pdf",onChange:t=>n(e.id,t.target.files[0]),disabled:a})]})}),T.jsx("td",{children:!o&&T.jsx("button",{onClick:()=>s(e.id),className:"btn btn-danger btn-small",title:"Delete Row",children:T.jsx(Q,{})})})]})}),ce=r.memo(({site:t,onBack:r,user:s,isCEO:n})=>{const[a,i]=e.useState([]),[o,l]=e.useState([]),[c,m]=e.useState(!0),[u,p]=e.useState(""),[h,x]=e.useState(""),[g,j]=e.useState(""),[_,O]=e.useState(!1),[B,R]=e.useState(!1),[L,A]=e.useState(!1),[D,F]=e.useState(""),[M,P]=e.useState({}),U=n();e.useEffect(()=>{const e=v(d($,"sites",t.id),e=>{if(e.exists()){const t=e.data(),r=t.expenses||{};l(t.expenseColumns||r.columns||[{id:"item",name:"Item Description",type:"text",width:"200px"},{id:"amount",name:"Amount (â‚¹)",type:"number",width:"120px"}]),p(t.ceoBudget||r.ceoBudget||""),x(t.ceoProjectValue||r.ceoProjectValue||"")}});return()=>e()},[t.id]),e.useEffect(()=>{const e=y(f($,"sites",t.id,"expenses"),b("createdAt","desc"),limit(100)),r=v(e,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));i(t),m(!1)},e=>{m(!1),alert("âš ï¸ Failed to load expenses. Please check your connection.")});return()=>r()},[t.id]);const V=e.useCallback(async(e,r)=>{try{await w(f($,"audit_logs"),{action:e,details:r,siteId:t.id,siteName:t.name,userId:s.uid,userEmail:s.email,timestamp:C()})}catch(n){}},[t.id,t.name,s.uid,s.email]),z=e.useCallback(async(e,r,s)=>{R(!0);const n=d($,"sites",t.id);try{await S(n,{expenseColumns:e,ceoBudget:r,ceoProjectValue:s}),V("UPDATE_METADATA",{budget:r,projectValue:s})}catch(a){alert("Failed to save changes.")}R(!1)},[t.id,V]),W=()=>{A(!0),setTimeout(()=>A(!1),3e3)},q=e.useCallback(async(e,r,s)=>{i(t=>t.map(t=>t.id===e?{...t,[r]:s}:t));try{await S(d($,"sites",t.id,"expenses",e),{[r]:s})}catch(n){}},[t.id]),G=e.useCallback(async e=>{if(confirm("Delete this expense row?"))try{await N(d($,"sites",t.id,"expenses",e)),V("DELETE_EXPENSE",{expenseId:e})}catch(r){alert("Failed to delete row.")}},[t.id,V]),Y=e.useCallback(async(e,r)=>{if(r)if(H){P(t=>({...t,[e]:!0}));try{const s=r.name.split(".").pop(),n=`${Date.now()}_${Math.random().toString(36).substring(7)}.${s}`,a=k(H,`receipts/${t.id}/${e}/${n}`);await E(a,r);const i=await I(a);await S(d($,"sites",t.id,"expenses",e),{receiptUrl:i,receiptName:r.name,updatedAt:C()}),V("UPLOAD_RECEIPT",{expenseId:e,fileName:r.name})}catch(s){s.message.includes("retry-limit-exceeded")?alert("âš ï¸ Storage Connection Failed!\n\nThis usually means:\n1. Storage is NOT enabled in Firebase Console (Most Likely).\n2. Storage Rules are blocking the upload.\n\nPlease go to Firebase Console > Storage and click 'Get Started'."):alert("âŒ Upload failed: "+s.message)}finally{P(t=>({...t,[e]:!1}))}}else alert("âŒ Storage not configured. Please check your Firebase settings.")},[t.id,V]),K=e.useMemo(()=>{if(!D)return a;const e=D.toLowerCase();return a.filter(t=>Object.values(t).some(t=>t&&String(t).toLowerCase().includes(e)))},[a,D]),J=e.useMemo(()=>K.reduce((e,t)=>e+(parseFloat(t.amount)||0),0),[K]),se=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),ne=parseFloat(u)||0,oe=e.useMemo(()=>ne>0?J/ne*100:0,[J,ne]),le=ne>0&&J>ne,ce=ne>0&&J>.9*ne,me=e.useMemo(()=>oe>90?"var(--danger-color)":oe>75?"var(--warning-color)":"var(--success-color)",[oe]);return T.jsxs("div",{className:"container fade-in",style:{minHeight:"100vh",paddingTop:"2rem",paddingBottom:"2rem"},children:[T.jsxs("div",{className:"flex-between mb-lg",children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[T.jsx("button",{onClick:r,className:"btn btn-secondary btn-small",style:{borderRadius:"var(--radius-md)"},children:T.jsx(ie,{})}),T.jsx("div",{style:{background:"linear-gradient(135deg, var(--primary-color), var(--primary-dark))",color:"white",padding:"10px",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-premium)"},children:T.jsx(X,{})}),T.jsxs("div",{children:[T.jsx("h1",{style:{margin:0,fontSize:"1.5rem"},children:t.name}),T.jsxs("p",{className:"text-muted",style:{fontSize:"0.875rem",fontWeight:500},children:["ðŸ“ ",t.location]})]})]}),T.jsx("div",{className:"flex gap-sm",children:T.jsxs("button",{onClick:()=>{if(0===a.length)return void alert("No data to export");const e=[o.map(e=>e.name).join(","),...a.map(e=>o.map(t=>{const r=e[t.id]||"";return`"${String(r).replace(/"/g,'""')}"`}).join(","))].join("\n"),r=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(r),s.download=`${t.name}_expenses_${(new Date).toISOString().split("T")[0]}.csv`,s.click(),V("EXPORT_CSV",{})},className:"btn btn-secondary",children:[T.jsx(te,{})," Export CSV"]})})]}),ce&&T.jsxs("div",{style:{background:le?"rgba(255, 59, 48, 0.1)":"rgba(255, 204, 0, 0.1)",border:"1px solid "+(le?"var(--danger-color)":"var(--warning-color)"),color:le?"var(--danger-color)":"var(--text-primary)",padding:"1rem",borderRadius:"var(--radius-md)",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",fontWeight:"600"},children:[T.jsx("span",{style:{fontSize:"1.2rem"},children:"âš ï¸"}),T.jsx("span",{children:le?"Project is OVER BUDGET!":"Project is nearing budget limit (>90%)."})]}),T.jsxs("div",{className:"card mb-lg",children:[T.jsxs("div",{className:"flex-between mb-md",children:[T.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[T.jsx(ae,{})," Project Overview"]}),T.jsxs("div",{className:"flex gap-sm align-center",children:[L&&T.jsx("span",{className:"text-success fade-in",style:{fontWeight:"bold",fontSize:"0.875rem"},children:"Saved Successfully"}),T.jsxs("button",{onClick:W,className:"btn btn-success btn-small",children:[T.jsx(Z,{})," Save Changes"]})]})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"var(--spacing-md)"},children:[T.jsxs("div",{className:"input-group",children:[T.jsx("label",{children:"Project Budget"}),T.jsx("input",{type:"number",value:u,onChange:e=>{p(e.target.value),z(o,e.target.value,h)},disabled:!U})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{children:"Total Project Value"}),T.jsx("input",{type:"number",value:h,onChange:e=>{x(e.target.value),z(o,u,e.target.value)},disabled:!U})]})]}),ne>0&&T.jsxs("div",{style:{marginTop:"1.5rem"},children:[T.jsxs("div",{className:"flex-between mb-sm",children:[T.jsx("span",{className:"text-small text-muted",style:{fontWeight:"600"},children:"Budget Usage"}),T.jsxs("span",{className:"text-small",style:{color:me,fontWeight:"700"},children:[oe.toFixed(1),"%"]})]}),T.jsx("div",{style:{width:"100%",height:"12px",background:"#f2f2f7",borderRadius:"6px",overflow:"hidden",boxShadow:"var(--shadow-inner)"},children:T.jsx("div",{style:{width:`${Math.min(oe,100)}%`,height:"100%",background:`linear-gradient(90deg, ${me}, var(--accent-color))`,transition:"width 1s cubic-bezier(0.34, 1.56, 0.64, 1)"}})}),T.jsxs("div",{className:"flex-between mt-sm text-small",children:[T.jsxs("span",{className:"text-muted",style:{fontWeight:600},children:["Spent: ",T.jsx("strong",{style:{color:"var(--text-primary)"},children:se(J)})]}),T.jsxs("span",{className:"text-muted",style:{fontWeight:600},children:["Remaining: ",T.jsx("strong",{style:{color:"var(--success-color)"},children:se(Math.max(0,ne-J))})]})]})]})]}),T.jsxs("div",{className:"card mb-lg",style:{overflow:"hidden",padding:0},children:[T.jsx("div",{style:{padding:"var(--spacing-lg)",borderBottom:"1px solid var(--glass-border)"},children:T.jsxs("div",{className:"flex-between",style:{flexWrap:"wrap",gap:"1rem"},children:[T.jsxs("div",{className:"flex gap-md",style:{flex:1,alignItems:"center"},children:[T.jsx("h2",{style:{margin:0},children:"Site Expenses"}),T.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"300px"},children:[T.jsx("span",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"},children:T.jsx(re,{})}),T.jsx("input",{type:"text",placeholder:"Search expenses...",value:D,onChange:e=>F(e.target.value),style:{paddingLeft:"36px",paddingTop:"8px",paddingBottom:"8px",fontSize:"0.875rem"}})]})]}),T.jsxs("div",{className:"flex gap-sm",children:[T.jsxs("button",{onClick:()=>O(!0),className:"btn btn-secondary btn-small",children:[T.jsx(ee,{})," Column"]}),T.jsxs("button",{onClick:async()=>{try{const e={createdAt:C(),createdByRole:s.role};o.forEach(t=>e[t.id]="");const r=await w(f($,"sites",t.id,"expenses"),e);V("ADD_EXPENSE",{expenseId:r.id,role:s.role})}catch(e){alert("Failed to add row.")}},className:"btn btn-primary btn-small",children:[T.jsx(ee,{})," Row"]}),T.jsxs("button",{onClick:W,className:"btn btn-success btn-small",children:[T.jsx(Z,{})," Save All"]})]})]})}),T.jsx("div",{className:"table-container",children:T.jsxs("table",{children:[T.jsx("thead",{children:T.jsxs("tr",{children:[o.map(e=>T.jsx("th",{style:{width:e.width},children:T.jsxs("div",{className:"flex-between",children:[e.name,"item"!==e.id&&"amount"!==e.id&&T.jsx("button",{onClick:()=>(e=>{if("item"===e||"amount"===e)return void alert("Cannot delete default columns");const t=o.find(t=>t.id===e);if(U||"CEO"!==t?.createdByRole){if(confirm("Delete this column definition?")){const t=o.filter(t=>t.id!==e);l(t),z(t,u,h),V("DELETE_COLUMN",{columnId:e})}}else alert("âŒ Only a CEO can delete CEO-created columns")})(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:T.jsx(Q,{})})]})},e.id)),T.jsx("th",{style:{width:"120px"},children:"Receipt"}),T.jsx("th",{style:{width:"80px"},children:"Actions"})]})}),T.jsx("tbody",{children:c?T.jsx("tr",{children:T.jsx("td",{colSpan:o.length+2,className:"text-center",style:{padding:"3rem"},children:T.jsx("div",{className:"loading-spinner-small",style:{margin:"0 auto"}})})}):0===K.length?T.jsx("tr",{children:T.jsx("td",{colSpan:o.length+2,className:"text-center text-muted",style:{padding:"3rem"},children:D?"No expenses match your search":"No expenses recorded yet"})}):K.map(e=>T.jsx(de,{row:e,columns:o,onUpdate:q,onDelete:G,onUpload:Y,isUploading:!!M[e.id],isCEOUser:U},e.id))}),K.length>0&&T.jsx("tfoot",{children:T.jsxs("tr",{style:{background:"#f9fafb",fontWeight:"bold"},children:[T.jsx("td",{colSpan:o.findIndex(e=>"amount"===e.id),className:"text-right",children:"Total:"}),T.jsx("td",{children:se(J)}),T.jsx("td",{colSpan:o.length-o.findIndex(e=>"amount"===e.id)+1})]})})]})})]}),_&&T.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(4px)"},children:T.jsxs("div",{className:"card fade-in",style:{width:"100%",maxWidth:"400px"},children:[T.jsx("h3",{className:"mb-md",children:"Add Custom Column"}),T.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!g.trim())return;const t={id:`col_${Date.now()}`,name:g,type:"text",width:"150px",createdByRole:s.role},r=[...o,t];l(r),z(r,u,h),j(""),O(!1),V("ADD_COLUMN",{columnName:g,role:s.role})},children:[T.jsxs("div",{className:"input-group",children:[T.jsx("label",{children:"Column Name"}),T.jsx("input",{type:"text",placeholder:"e.g., Vendor, Date, Category",value:g,onChange:e=>j(e.target.value),autoFocus:!0,required:!0})]}),T.jsxs("div",{className:"flex gap-sm mt-lg",children:[T.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},children:"Add Column"}),T.jsx("button",{type:"button",onClick:()=>O(!1),className:"btn btn-secondary",style:{flex:1},children:"Cancel"})]})]})]})})]})}),me=()=>T.jsxs("div",{className:"flex-center",style:{minHeight:"100vh",flexDirection:"column"},children:[T.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem",animation:"pulse 1.5s infinite"},children:"ðŸ—ï¸"}),T.jsx("h2",{children:"Loading..."}),T.jsx("p",{className:"text-muted",style:{marginBottom:"1.5rem"},children:"Connecting to construction database..."}),T.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary btn-small",style:{opacity:.7},children:"ðŸ”„ Refresh App"})]}),ue=()=>{const{user:t,loading:r}=G(),[s,n]=e.useState(null);return r?T.jsx(me,{}):t?s?T.jsx(ce,{site:s,onBack:()=>n(null)}):T.jsx(oe,{onSelectSite:n}):T.jsx(K,{})};function pe(){return T.jsx(Y,{children:T.jsx(e.Suspense,{fallback:T.jsx(me,{}),children:T.jsx(ue,{})})})}P.createRoot(document.getElementById("root")).render(T.jsx(r.StrictMode,{children:T.jsx(pe,{})}));
